# 功能接口需求

## 图片上传

/authorization

## 用户登录 权限校验 POST

错误 状态码401



## 用户

/users

- post 添加 201 created 添加用户

- patch 部分更新 200 OK 更新用户信息
- delete 删除用户 204 No Content 删除用户

数据结构

```js
const mongoose = require('../dblink')

const UserSchema = mongoose.Schema({
  username: {
    type: String,
    required: true,
    trim: true,
    unique: true
  },
  password: {
    type: String,
    required: true,
    trim: true,
    // match: /^[a-zA-Z]\w{5,17}$/ // 以字母开头，长度在6~18之间，只能包含字母、数字和下划线 应储存为加密后的数据
  },
  mobile: {
    type: String,
    match: /^(13[0-9]|14[5|7]|15[0|1|2|3|4|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/
  },
  email: {
    type: String,
    match: /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/
  },
  role_id: {
    type: Number,
    default: 0
  }
},
  { timestamps: true }
)

const User = mongoose.model('user', UserSchema)

module.exports = { User }

```



## 角色 - 暂时不处理

/roles

- post 添加角色

  - 角色名称 roleName
  - 角色描述roleDesc
  - 角色权限 roleRights

- patch 更新角色

- delete 删除角色

默认角色
```js
{
	role_id: 0, // 角色id
	role_name: '超级管理员' // 角色名称
	role_description: '具有所有权限’, // 对角色的描述
	right_list: [0,1,2,3,4,5,6,7,8,9,10] // 对应right_id
}
```

  

  

## 权限 - 暂时不处理

权限是初始化好的表 ，通过node initDefaultRights.js 配置

initDefaultRights.js 主要内容:

```js
[
	{
        right_id: 10,
        right_category: '所有数据'
        right_description: '添加用户'
    },
    {
        right_id: 11,
        right_category: '所有数据'
        right_description: '删除用户'
    },
    {
        right_id: 12,
        right_category: '所有数据'
        right_description: '修改用户'
    },
    {
        right_id: 13,
        right_category: '所有数据'
        right_description: '查询用户'
    },
    {
        right_id: 0,
        right_category: '所有数据'
        right_description: '添加用户'
    },
    {
        right_id: 0,
        right_category: '所有数据'
        right_description: '添加用户'
    },
    {
        right_id: 0,
        right_category: '所有数据'
        right_description: '添加用户'
    },
    
     ...
]
```

  

## 一. 文章

### 1.文章

/articles

- get 查询文章列表

- post 添加新的文章
- patch 编辑文章
- delete 删除文章

### 2.文章的数据结构

```
{
	article_id: 唯一标识符 数据库自动生成
	article_category: 文章的分类id
	article_isDraft: true | false 是否为草稿
	article_title: 标题
	article_content: 内容，为html格式的字符串
	article_update_time: 最后修改时间 x
	article_create_time: 创建时间 x
	author_id: 对应用户id
}
```



### 4.文章模板

/article_models

- post 添加新的文章模板
- patch 编辑文章模板
- delete 删除文章模板



数据结构

```
{
	article_model_id: 0 唯一标识符
	article_model_name：名称，比如‘付克反应实验记录模板’
	article_model_description：描述
	article_model_content: 内容 html字符串
	article_model_type: private | common 私人的或者公共的
}
```



### 5.文章分类

/article_categories

- post 创建文章分类

- patch 编辑文章分类

- delete 删除文章分类

  

  数据结构

```
{
	article_category_id: 0 唯一标识符
	article_category_name: 名称，比如‘未分类’
	article_category_description: 描述,比如‘默认的文章分类’,
	article_appearance: 分类的css样式 比如 {color: "#fff", backgroundColor: "#ccc"}
}
```



## 二. 定位图

### 1. 谱图

/hplcs

- post 创建高效液相色谱图
- patch 编辑高效液相色谱图
- delete 删除高效液相色谱图



数据结构

```
{
	hplc_id: 0 唯一标识符
	hplc_name: 名称
	hplc_description: 描述
	hplc_wavelength: 波长条件 单位nm
	hplc_velocity: 流速 单位mL/min
	hplc_mobilephase: 流动相 '甲醇:水 = 3:2 + 1.7mL 磷酸/500mL'
	hplc_image: url地址 'http://xxx.xxx.xxxxxx.png'
	hplc_updateTime: x
	hplc_createTime: x
}
```

